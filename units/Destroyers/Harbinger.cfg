#textdomain wesnoth-Era_of_Magic
[unit_type]
    id=EoMa_Harbinger
    name= _ "Harbinger"
    race=undead
    image="units/destroyers-maras/harbinger.png"

    ellipse="misc/ellipse"
    hitpoints=36
    movement_type=undeadspirit
    movement=8
    experience=107
    level=2
    alignment=chaotic
    advances_to=EoMa_Doom_Bringer
    cost=40#38
    usage=mixed fighter
    num_traits=2
    ignore_race_traits=yes
    {TRAIT_UNDEAD}
    {TRAIT_INTELLIGENT}
    {TRAIT_QUICK}
    {TRAIT_STRONG}
    {TRAIT_DEXTROUS}
    description= _ "Sometimes, when a Nightmare consumes too many souls, they fail to stabilize their original soul and implode into a being of pure void, fracturing reality around itself into an anti-magic black hole. This cursed spirit is able to destabilize its prey to more easily absorb its vital energy, but is no longer interested in devouring the soul: it just erases it, feeding the corpse to the growing hordes of the Destroyers."
    die_sound=wail-long.wav
    {DESTROYER_ADVANCEMENT_ANIM}
    {DESTROYER_NIGHTMARE_RECRUIT_ANIM harbinger 115,115}
    [resistance]
        impact=60
        blade=60
        pierce=60
        arcane=120
        fire=80
        cold=80
    [/resistance]
    [abilities]
        {ABILITY_EOMA_NOCTURNAL_REGENERATION 5}
    [/abilities]
    [standing_anim]
        start_time=0
        lightning_start_time=0
        cloud_start_time=0
        cloud2_start_time=0
        glow_start_time=0
        [lightning_frame]
            duration=4500
            image="halo/air-lightning/00[01~45,01~45,01~45].png"
            image_mod="~SCALE(72,72)~BLEND(255,0,0,1.0)"
            layer=98
            offset=0.0
        [/lightning_frame]

        [cloud_frame]
            duration=4500
            image="halo/air-clouds2/0[001~130].png"
            image_mod="~SCALE(72,72)~BLEND(0,0,0,1.0)"
        [/cloud_frame]

        [cloud2_frame]
            duration=400
            image="units/tharis-orbs/lightning-rim[1~5].png"
            image_mod="~BLEND(255,0,0,1.0)"
            x=0
            y=6
            auto_vflip=no
        [/cloud2_frame]

        [glow_frame]
            duration=3000
            image="halo/doom-glow.png"
            layer=99
            auto_vflip=no
        [/glow_frame]

        [frame]
            duration=400
            image="units/tharis-orbs/cloud-[1,2,3,2].png"
            image_mod="~SCALE(72,72)"
            x=0
            y=6
            auto_vflip=no
        [/frame]
    [/standing_anim]

    [movement_anim]
        [frame]
            duration=400
            image="units/destroyers-maras/harbinger.png"
        [/frame]
    [/movement_anim]
    [defend]
        start_time=-126
        lightning_start_time=-126
        cloud_start_time=-126
        cloud2_start_time=-126
        glow_start_time=-126
        [lightning_frame]
            duration=256
            image="halo/air-lightning/00[01~45,01~45,01~45].png"
            image_mod="~SCALE(72,72)~BLEND(255,0,0,1.0)"
            layer=99
            offset=0.0
        [/lightning_frame]

        [cloud_frame]
            duration=256
            image="halo/air-clouds2/0[001~130].png"
            image_mod="~SCALE(72,72)~BLEND(0,0,0,1.0)"
        [/cloud_frame]

        [cloud2_frame]
            duration=256
            halo="units/tharis-orbs/lightning-rim[1~5].png"
            halo_mod="~BLEND(255,0,0,1.0)"
            halo_x=0
            halo_y=6
            auto_vflip=no
        [/cloud2_frame]

        [glow_frame]
            duration=256
            image="halo/doom-glow.png"
            layer=50
        [/glow_frame]

        [frame]
            duration=256
            image="units/tharis-orbs/cloud-[1,2,3,2].png"
            image_mod="~SCALE(72,72)"
        [/frame]
    [/defend]

    [attack]
        name=touch
        description=_"flames of doom"
        icon=attacks/curse.png
        type=fire
        range=melee
        damage=4
        number=4
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
    [/attack]
    [attack]
        name=wail
        description=_"corrupted fire"
        icon=attacks/chaotic-blast.png
        type=fire
        range=ranged
        damage=7
        number=3
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_PLAGUE}
        [/specials]
    [/attack]
    [attack]
        name=vortex
        description=_"chaotic vortex"
        icon=attacks/anti-magic.png
        type=impact
        range=ranged
        damage=15
        number=1
        [specials]
            {WEAPON_SPECIAL_EOMA_PRECISION_OFFENSIVE}
            {WEAPON_SPECIAL_EOMA_STUN}
            {WEAPON_SPECIAL_EOMA_IMMOBILIZE}
        [/specials]
    [/attack]

    [attack_anim]
        [filter_attack]
            name=touch
        [/filter_attack]
        start_time=-500
        offset=0.0~1.0:425,0.0:225
        sound=magic-dark.ogg
    [/attack_anim]

    [attack_anim]
        [filter_attack]
            name=wail
        [/filter_attack]
        start_time=-500
        missile_start_time=-300
        [missile_frame]
            duration=50
            image="projectiles/firewave-n1.png~CS(0,-255,-255)"
            image_diagonal="projectiles/firewave-1.png~CS(0,-255,-255)"
            offset=0.0~0.2
            sound=chaotic-blast.wav
        [/missile_frame]
        [missile_frame]
            duration=50
            image="projectiles/firewave-n2.png~CS(0,-255,-255)"
            image_diagonal="projectiles/firewave-2.png~CS(0,-255,-255)"
            offset=0.2~0.4
        [/missile_frame]
        [missile_frame]
            duration=50
            image="projectiles/firewave-n3.png~CS(0,-255,-255)"
            image_diagonal="projectiles/firewave-3.png~CS(0,-255,-255)"
            offset=0.4~0.6
        [/missile_frame]
        [missile_frame]
            duration=50
            image="projectiles/firewave-n4.png~CS(0,-255,-255)"
            image_diagonal="projectiles/firewave-4.png~CS(0,-255,-255)"
            offset=0.6~0.8
        [/missile_frame]
        [missile_frame]
            duration=50
            image="projectiles/firewave-n5.png~CS(0,-255,-255)"
            image_diagonal="projectiles/firewave-5.png~CS(0,-255,-255)"
            offset=0.8~1.0
        [/missile_frame]
    [/attack_anim]

    [attack_anim]
        [filter_attack]
            name=vortex
        [/filter_attack]
        missile_start_time=-500
        missile2_start_time=-200
        [missile_frame]
            duration=100
            halo=halo/implosion-1-1.png
            halo_mod=~GS()~CS(-64,-255,-255)
            offset=1.0
        [/missile_frame]
        [missile_frame]
            halo=halo/implosion-1-[2~4].png:100
            halo_mod=~GS()~CS(-64,-255,-255)
            offset=1.0
            sound=magic-dark.ogg
        [/missile_frame]
        [missile_frame]
            duration=100
            halo=halo/implosion-1-5.png
            halo_mod=~GS()~CS(-64,-255,-255)
            offset=1.0
            sound=flame-big.ogg
        [/missile_frame]
        [missile_frame]
            duration=100
            halo=halo/implosion-1-6.png
            halo_mod=~GS()~CS(-64,-255,-255)
            offset=1.0
            sound=explosion.ogg
        [/missile_frame]
        [missile2_frame]
            halo="projectiles/fireball-impact-[1~16].png~SCALE(150,225)~GS()~CS(-64,-255,-255):60"
            offset=1.0
            auto_vflip=no
        [/missile2_frame]
        [missile_frame]
            duration=100
            halo=halo/implosion-1-[7~10].png
            halo_mod=~GS()~CS(-64,-255,-255)
            offset=1.0
        [/missile_frame]
        start_time=-250
    [/attack_anim]
[/unit_type]
